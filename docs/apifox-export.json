{
  "apifoxProject": {
    "name": "E-CAM Service API",
    "description": "企业云资产管理服务 API 文档",
    "version": "1.0.0"
  },
  "folders": [
    {
      "name": "云资产管理",
      "description": "云资产相关接口"
    },
    {
      "name": "云账号管理",
      "description": "云账号配置和管理"
    },
    {
      "name": "资源同步",
      "description": "云资源同步相关接口"
    },
    {
      "name": "模型管理",
      "description": "资源模型管理"
    }
  ],
  "apis": [
    {
      "folder": "云账号管理",
      "name": "创建云账号",
      "method": "POST",
      "path": "/api/v1/cam/cloud-accounts",
      "description": "创建新的云账号配置",
      "request": {
        "body": {
          "type": "application/json",
          "example": {
            "name": "生产环境阿里云账号",
            "provider": "aliyun",
            "environment": "production",
            "access_key_id": "LTAI...",
            "access_key_secret": "xxx",
            "region": "cn-shenzhen",
            "description": "生产环境主账号",
            "config": {
              "enable_auto_sync": true,
              "sync_interval": 3600,
              "read_only": false,
              "show_sub_accounts": true,
              "enable_cost_monitoring": true,
              "supported_regions": ["cn-beijing", "cn-shanghai", "cn-shenzhen"],
              "supported_asset_types": ["ecs", "rds", "oss"]
            },
            "tenant_id": "tenant_001"
          }
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "id": 1,
              "name": "生产环境阿里云账号",
              "provider": "aliyun",
              "status": "active",
              "create_time": "2025-10-30 17:00:00"
            }
          }
        }
      }
    },
    {
      "folder": "云账号管理",
      "name": "获取云账号列表",
      "method": "GET",
      "path": "/api/v1/cam/cloud-accounts",
      "description": "获取云账号列表，支持筛选和分页",
      "request": {
        "query": {
          "provider": "aliyun",
          "environment": "production",
          "status": "active",
          "offset": 0,
          "limit": 20
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "accounts": [
                {
                  "id": 1,
                  "name": "生产环境阿里云账号",
                  "provider": "aliyun",
                  "environment": "production",
                  "region": "cn-shenzhen",
                  "status": "active",
                  "asset_count": 150,
                  "last_sync_time": "2025-10-30 16:00:00",
                  "create_time": "2025-10-30 10:00:00"
                }
              ],
              "total": 1
            }
          }
        }
      }
    },
    {
      "folder": "云账号管理",
      "name": "获取云账号详情",
      "method": "GET",
      "path": "/api/v1/cam/cloud-accounts/:id",
      "description": "获取指定云账号的详细信息",
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "id": 1,
              "name": "生产环境阿里云账号",
              "provider": "aliyun",
              "environment": "production",
              "access_key_id": "LTAI...",
              "access_key_secret": "***",
              "region": "cn-shenzhen",
              "description": "生产环境主账号",
              "status": "active",
              "config": {
                "enable_auto_sync": true,
                "sync_interval": 3600,
                "supported_regions": ["cn-beijing", "cn-shanghai"],
                "supported_asset_types": ["ecs", "rds"]
              },
              "asset_count": 150,
              "last_sync_time": "2025-10-30 16:00:00",
              "last_test_time": "2025-10-30 15:00:00",
              "create_time": "2025-10-30 10:00:00",
              "update_time": "2025-10-30 15:00:00"
            }
          }
        }
      }
    },
    {
      "folder": "云账号管理",
      "name": "测试云账号连接",
      "method": "POST",
      "path": "/api/v1/cam/cloud-accounts/:id/test-connection",
      "description": "测试云账号的连接性和凭证有效性",
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "status": "success",
              "message": "连接测试成功",
              "regions": ["cn-beijing", "cn-shanghai", "cn-shenzhen"],
              "test_time": "2025-10-30 17:00:00"
            }
          }
        }
      }
    },
    {
      "folder": "云账号管理",
      "name": "同步云账号资产",
      "method": "POST",
      "path": "/api/v1/cam/cloud-accounts/:id/sync",
      "description": "触发指定云账号的资产同步",
      "request": {
        "body": {
          "type": "application/json",
          "example": {
            "asset_types": ["ecs", "rds", "oss"],
            "regions": ["cn-beijing", "cn-shanghai"]
          }
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "sync_id": "sync_20251030170000",
              "status": "running",
              "start_time": "2025-10-30 17:00:00"
            }
          }
        }
      }
    },
    {
      "folder": "资源同步",
      "name": "发现云资产",
      "method": "POST",
      "path": "/api/v1/cam/assets/discover",
      "description": "从云厂商发现资产（不保存到数据库）",
      "request": {
        "body": {
          "type": "application/json",
          "example": {
            "provider": "aliyun",
            "region": "cn-beijing"
          }
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "assets": [
                {
                  "asset_id": "i-bp1234567890",
                  "asset_name": "web-server-01",
                  "asset_type": "ecs",
                  "provider": "aliyun",
                  "region": "cn-beijing",
                  "status": "running"
                }
              ],
              "count": 1
            }
          }
        }
      }
    },
    {
      "folder": "资源同步",
      "name": "同步云资产",
      "method": "POST",
      "path": "/api/v1/cam/assets/sync",
      "description": "同步云资产到数据库",
      "request": {
        "body": {
          "type": "application/json",
          "example": {
            "provider": "aliyun"
          }
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": null
          }
        }
      }
    },
    {
      "folder": "云资产管理",
      "name": "获取资产列表",
      "method": "GET",
      "path": "/api/v1/cam/assets",
      "description": "获取云资产列表，支持筛选和分页",
      "request": {
        "query": {
          "provider": "aliyun",
          "asset_type": "ecs",
          "region": "cn-beijing",
          "status": "running",
          "asset_name": "web",
          "offset": 0,
          "limit": 20
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "assets": [
                {
                  "id": 1,
                  "asset_id": "i-bp1234567890",
                  "asset_name": "web-server-01",
                  "asset_type": "ecs",
                  "provider": "aliyun",
                  "region": "cn-beijing",
                  "zone": "cn-beijing-a",
                  "status": "running",
                  "tags": [
                    {"key": "env", "value": "prod"},
                    {"key": "app", "value": "web"}
                  ],
                  "cost": 150.5,
                  "create_time": "2025-10-30 10:00:00",
                  "discover_time": "2025-10-30 16:00:00"
                }
              ],
              "total": 1
            }
          }
        }
      }
    },
    {
      "folder": "云资产管理",
      "name": "获取资产统计",
      "method": "GET",
      "path": "/api/v1/cam/assets/statistics",
      "description": "获取资产统计信息",
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "total_assets": 150,
              "provider_stats": {
                "aliyun": 100,
                "aws": 30,
                "azure": 20
              },
              "asset_type_stats": {
                "ecs": 80,
                "rds": 40,
                "oss": 30
              },
              "region_stats": {
                "cn-beijing": 60,
                "cn-shanghai": 50,
                "cn-shenzhen": 40
              },
              "status_stats": {
                "running": 120,
                "stopped": 20,
                "deleted": 10
              },
              "total_cost": 15000.50,
              "last_discover_time": "2025-10-30 16:00:00"
            }
          }
        }
      }
    },
    {
      "folder": "模型管理",
      "name": "创建模型",
      "method": "POST",
      "path": "/api/v1/cam/models",
      "description": "创建新的资源模型",
      "request": {
        "body": {
          "type": "application/json",
          "example": {
            "uid": "cloud_ecs",
            "name": "云主机",
            "model_group_id": 1,
            "category": "compute",
            "icon": "server",
            "description": "云服务器实例",
            "provider": "all"
          }
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "id": 1,
              "uid": "cloud_ecs",
              "name": "云主机"
            }
          }
        }
      }
    },
    {
      "folder": "模型管理",
      "name": "获取模型列表",
      "method": "GET",
      "path": "/api/v1/cam/models",
      "description": "获取资源模型列表",
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "models": [
                {
                  "id": 1,
                  "uid": "cloud_ecs",
                  "name": "云主机",
                  "category": "compute",
                  "description": "云服务器实例"
                }
              ],
              "total": 1
            }
          }
        }
      }
    },
    {
      "folder": "模型管理",
      "name": "添加模型字段",
      "method": "POST",
      "path": "/api/v1/cam/models/:uid/fields",
      "description": "为模型添加字段",
      "request": {
        "body": {
          "type": "application/json",
          "example": {
            "field_uid": "ecs_instance_id",
            "field_name": "instance_id",
            "field_type": "string",
            "model_uid": "cloud_ecs",
            "group_id": 1,
            "display_name": "实例ID",
            "display": true,
            "index": 1,
            "required": true,
            "secure": false,
            "link": false
          }
        }
      },
      "response": {
        "200": {
          "type": "application/json",
          "example": {
            "code": 0,
            "msg": "success",
            "data": {
              "id": 1,
              "field_uid": "ecs_instance_id",
              "field_name": "instance_id",
              "display_name": "实例ID"
            }
          }
        }
      }
    }
  ]
}
